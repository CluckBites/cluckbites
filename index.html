<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cluck Bites</title>

<style>

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #ffd9a8;
  text-align: center;
  color: #333;
}

header {
  background: #b22222;
  color: white;
  padding: 25px;
}

.container {
  background: #f2c894;
  padding: 25px;
  margin: 40px auto;
  width: 90%;
  max-width: 400px;
  border-radius: 15px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

select, input {
  width: 90%;
  padding: 10px;
  margin: 8px 0;
  border-radius: 6px;
  border: none;
}

button {
  width: 90%;
  padding: 12px;
  margin-top: 10px;
  border: none;
  border-radius: 6px;
  background: white;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  background: #ffe4c4;
}

#total {
  font-size: 20px;
  font-weight: bold;
  margin-top: 10px;
}

</style>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2">
  
</script>
  
</head>
<body>

<header>
<h1>Cluck Bites</h1>
<p>Order Your Food</p>
</header>

<div class="container">

<input type="text" id="customer" placeholder="Enter Your Name">

<select id="chicken">
<option value="69">3 Pieces - 69</option>
<option value="125">5 Pieces - 125</option>
<option value="170">7 Pieces - 170</option>
</select>

<select id="sauce">
<option value="0">No Sauce</option>
<option value="5">Sinigang (+5)</option>
<option value="2">Kare Kare (+2)</option>
<option value="2">Adobo (+2)</option>
</select>

<select id="drink">
<option value="0">No Drink</option>
<option value="16">Lychee Drink (+16)</option>
</select>

<div id="total">Total: 0</div>

<button onclick="calculate()">Calculate</button>
<button onclick="submitOrder()">Submit Order</button>

</div>

<script>

const supabaseUrl = "https://grtttmvcwswbfqbmfwlt.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdydHR0bXZjd3N3YmZxYm1md2x0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIyNjYyMjUsImV4cCI6MjA4Nzg0MjIyNX0.Rq0iWluWgd7IsTjU6Sg7F-SpDvXPysd9BkVPvAhn7fI";

const supabase = supabase.createClient(supabaseUrl, supabaseKey);
  
const chicken = document.getElementById("chicken");
const sauce = document.getElementById("sauce");
const drink = document.getElementById("drink");
const totalDisplay = document.getElementById("total");

function calculate() {

let total =
parseInt(chicken.value) +
parseInt(sauce.value) +
parseInt(drink.value);

totalDisplay.innerText = "Total: " + total;

}

async function submitOrder() {

let name = document.getElementById("customer").value;

if(name === "") {
alert("Please enter your name.");
return;
}

let total =
parseInt(chicken.value) +
parseInt(sauce.value) +
parseInt(drink.value);

const { error } = await supabase
.from("orders")
.insert([{
customer_name: name,
chicken_size: chicken.options[chicken.selectedIndex].text,
sauce: sauce.options[sauce.selectedIndex].text,
drink: drink.options[drink.selectedIndex].text,
total_price: total,
status: "active"
}]);

if(error){
alert("Database error");
console.log(error);
} else {
alert("Order saved to database!");
}

}

</script>

</body>
</html>
