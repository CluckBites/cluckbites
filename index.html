<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cluck Bites</title>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>

/* ===== PAGE ===== */

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #ffd9a8; /* light orange background */
  text-align: center;
  color: #333;
}

/* ===== TOP BUTTON ===== */

.top-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  background: white;
  color: #8b3a00;
  border: 2px solid #8b3a00;
  padding: 10px 18px;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
  z-index: 999;
}

.top-btn:hover {
  background: #ffe4c4;
}

/* ===== HEADER ===== */

header {
  background: #b22222; /* darker strong red */
  color: white;
  padding: 35px;
}

/* ===== CARD (NOW DARKER THAN BACKGROUND) ===== */

.card {
  background: #e6b17e; /* darker shade of background */
  padding: 25px;
  margin: 50px auto;
  width: 90%;
  max-width: 400px;
  border-radius: 16px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}

/* ===== INPUTS ===== */

select, input {
  padding: 10px;
  margin: 8px 0;
  width: 90%;
  border-radius: 8px;
  border: none;
}

/* ===== BUTTON ===== */

button {
  background: white;
  color: #8b3a00;
  border: none;
  padding: 12px;
  width: 90%;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background: #ffe4c4;
}

#total {
  font-size: 20px;
  font-weight: bold;
  margin-top: 10px;
}

</style>
</head>
<body>

<!-- ‚úÖ CHECK ORDERS BUTTON -->
<button class="top-btn" onclick="window.location.href='orders.html'">
Check Orders
</button>

<header>
<h1>üçó Cluck Bites</h1>
<p>Crispy. Juicy. Unforgettable.</p>
</header>

<div class="card">

<h2>Place Your Order</h2>

<input type="text" id="customer" placeholder="Enter Your Name">

<select id="chicken">
<option value="69">3 Pieces - ‚Ç±69</option>
<option value="125">5 Pieces - ‚Ç±125</option>
<option value="170">7 Pieces - ‚Ç±170</option>
</select>

<select id="sauce">
<option value="0">No Sauce</option>
<option value="5">Sinigang Zing (+‚Ç±5)</option>
<option value="2">Kare-Kare Cream (+‚Ç±2)</option>
<option value="2">Adobo Glaze (+‚Ç±2)</option>
</select>

<select id="drink">
<option value="0">No Drink</option>
<option value="16">Lychee Nestea + Boba (+‚Ç±16)</option>
</select>

<div id="total">Total: ‚Ç±0</div>

<button class="order-btn" onclick="placeOrder()">
Place Order
</button>

</div>

<script>

/* ===== CONNECT TO SUPABASE ===== */

const supabaseUrl = "https://grtttmvcwswbfqbmfwlt.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdydHR0bXZjd3N3YmZxYm1md2x0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIyNjYyMjUsImV4cCI6MjA4Nzg0MjIyNX0.Rq0iWluWgd7IsTjU6Sg7F-SpDvXPysd9BkVPvAhn7fI";

const supabase = supabase.createClient(supabaseUrl, supabaseKey);

/* ===== CALCULATE TOTAL ===== */

function calculateTotal() {

let chicken = parseInt(document.getElementById("chicken").value);
let sauce = parseInt(document.getElementById("sauce").value);
let drink = parseInt(document.getElementById("drink").value);

let total = chicken + sauce + drink;

document.getElementById("total").innerText = "Total: ‚Ç±" + total;

return total;
}

/* ===== PLACE ORDER ===== */

async function placeOrder() {

let name = document.getElementById("customer").value;
if(name === ""){
alert("Please enter your name");
return;
}

let total = calculateTotal();

let chicken = document.getElementById("chicken").options[document.getElementById("chicken").selectedIndex].text;
let sauce = document.getElementById("sauce").options[document.getElementById("sauce").selectedIndex].text;
let drink = document.getElementById("drink").options[document.getElementById("drink").selectedIndex].text;

const { error } = await supabase
.from("orders")
.insert([{
customer_name: name,
chicken_size: chicken,
sauce: sauce,
drink: drink,
total_price: total,
status: "active"
}]);

if(error){
alert("Error saving order");
console.log(error);
} else {
alert("Order placed successfully!");
}

}

</script>

</body>
</html>
